Кажется, автор этой функции toBinary перепутал строки и списки,
забыл про null safety и про то, какие значения принимает if.